{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport { api } from '../services/api';\nexport const useWallet = () => {\n  _s();\n  const [balance, setBalance] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const fetchBalance = useCallback(async () => {\n    try {\n      setLoading(true);\n      const walletBalance = await api.getWalletBalance();\n      console.log('Fetched wallet balance:', walletBalance);\n      setBalance(walletBalance);\n    } catch (error) {\n      console.error('Error fetching wallet balance:', error);\n      // Set a default balance if there's an error\n      setBalance(0);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const rechargeWallet = useCallback(async amount => {\n    try {\n      console.log('Attempting to recharge wallet with amount:', amount);\n      const response = await api.rechargeWallet(amount);\n      console.log('Recharge response:', response);\n\n      // Update balance immediately with the new balance from response\n      if (response && response.newBalance !== undefined) {\n        setBalance(response.newBalance);\n      } else {\n        // Fallback: fetch the latest balance\n        await fetchBalance();\n      }\n      return response;\n    } catch (error) {\n      console.error('Error recharging wallet:', error);\n      throw error;\n    }\n  }, [fetchBalance]);\n  useEffect(() => {\n    fetchBalance();\n  }, [fetchBalance]);\n  return {\n    balance,\n    loading,\n    rechargeWallet,\n    refreshBalance: fetchBalance\n  };\n};\n_s(useWallet, \"BxwBXBax3fCZnrSb69zXh+EgYkk=\");","map":{"version":3,"names":["useState","useEffect","useCallback","api","useWallet","_s","balance","setBalance","loading","setLoading","fetchBalance","walletBalance","getWalletBalance","console","log","error","rechargeWallet","amount","response","newBalance","undefined","refreshBalance"],"sources":["C:/Citi/trading-app/trading-app/src/hooks/useWallet.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { api } from '../services/api';\r\n\r\nexport const useWallet = () => {\r\n  const [balance, setBalance] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchBalance = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const walletBalance = await api.getWalletBalance();\r\n      console.log('Fetched wallet balance:', walletBalance);\r\n      setBalance(walletBalance);\r\n    } catch (error) {\r\n      console.error('Error fetching wallet balance:', error);\r\n      // Set a default balance if there's an error\r\n      setBalance(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const rechargeWallet = useCallback(async (amount) => {\r\n    try {\r\n      console.log('Attempting to recharge wallet with amount:', amount);\r\n      const response = await api.rechargeWallet(amount);\r\n      console.log('Recharge response:', response);\r\n      \r\n      // Update balance immediately with the new balance from response\r\n      if (response && response.newBalance !== undefined) {\r\n        setBalance(response.newBalance);\r\n      } else {\r\n        // Fallback: fetch the latest balance\r\n        await fetchBalance();\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error recharging wallet:', error);\r\n      throw error;\r\n    }\r\n  }, [fetchBalance]);\r\n\r\n  useEffect(() => {\r\n    fetchBalance();\r\n  }, [fetchBalance]);\r\n\r\n  return {\r\n    balance,\r\n    loading,\r\n    rechargeWallet,\r\n    refreshBalance: fetchBalance\r\n  };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,GAAG,QAAQ,iBAAiB;AAErC,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,CAAC,CAAC;EACzC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAMU,YAAY,GAAGR,WAAW,CAAC,YAAY;IAC3C,IAAI;MACFO,UAAU,CAAC,IAAI,CAAC;MAChB,MAAME,aAAa,GAAG,MAAMR,GAAG,CAACS,gBAAgB,CAAC,CAAC;MAClDC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEH,aAAa,CAAC;MACrDJ,UAAU,CAACI,aAAa,CAAC;IAC3B,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD;MACAR,UAAU,CAAC,CAAC,CAAC;IACf,CAAC,SAAS;MACRE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMO,cAAc,GAAGd,WAAW,CAAC,MAAOe,MAAM,IAAK;IACnD,IAAI;MACFJ,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAEG,MAAM,CAAC;MACjE,MAAMC,QAAQ,GAAG,MAAMf,GAAG,CAACa,cAAc,CAACC,MAAM,CAAC;MACjDJ,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEI,QAAQ,CAAC;;MAE3C;MACA,IAAIA,QAAQ,IAAIA,QAAQ,CAACC,UAAU,KAAKC,SAAS,EAAE;QACjDb,UAAU,CAACW,QAAQ,CAACC,UAAU,CAAC;MACjC,CAAC,MAAM;QACL;QACA,MAAMT,YAAY,CAAC,CAAC;MACtB;MAEA,OAAOQ,QAAQ;IACjB,CAAC,CAAC,OAAOH,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,MAAMA,KAAK;IACb;EACF,CAAC,EAAE,CAACL,YAAY,CAAC,CAAC;EAElBT,SAAS,CAAC,MAAM;IACdS,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,OAAO;IACLJ,OAAO;IACPE,OAAO;IACPQ,cAAc;IACdK,cAAc,EAAEX;EAClB,CAAC;AACH,CAAC;AAACL,EAAA,CAlDWD,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}